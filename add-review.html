<!DOCTYPE html>
<html>
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-Z3RDBR33MX"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'G-Z3RDBR33MX');
    </script>
    <link rel="shortcut icon" href="/img/favicon.ico" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/base16/material-palenight.min.css"
    />
    <link rel="stylesheet" href="../css/styles.css" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Add a customer review to BenRonkin.com" />
    <title>Add a review | Ben Ronkin</title>
  </head>

  <body>
    <nav>
      <div class="nav-wrapper">
        <a href="../index.html" class="brand-logo" style="margin-left: 20px"
          >Ben Ronkin</a
        >
        <a href="#" data-target="mobile" class="sidenav-trigger"
          ><i class="material-icons black-text">menu</i></a
        >
        <ul class="sidenav" id="mobile">
          <li><a href="./products/index.html">Shop scripts</a></li>
          <li><a href="./portfolio/index.html">Case studies</a></li>
          <li><a href="./reviews.html">Client reviews</a></li>
          <li><a href="./blog/index.html">Blog</a></li>
          <li><a href="./contact.html">Contact</a></li>
        </ul>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
          <li data-tooltip="Work">
            <a href="./index.html">SHOP</a>
          </li>
          <li data-tooltip="Work">
            <a href="../portfolio/index.html">CASE STUDIES</a>
          </li>
          <li data-tooltip="Client Testimonials">
            <a href="./reviews.html">REVIEWS</a>
          </li>
          <li data-tooltip="Blog">
            <a href="../blog/index.html"> BLOG</a>
          </li>
          <li data-tooltip="Contact">
            <a href="../contact.html"> CONTACT</a>
          </li>
        </ul>
      </div>
    </nav>

    <section class="hero">
      <div class="container">
        <div class="row">
          <div class="col s12">
            <h1 class="product-header text-center mb0" style="color: white">
              Add a review
            </h1>
            <p class="product-subheader text-center" style="margin: auto"></p>
          </div>
        </div>
      </div>
    </section>

    <main>
      <div class="container" style="margin-top: 7rem">
        <div class="row">
          <div class="col s10 offset-s1">
            <p class="lead mt0 mb0">
              <b
                >Thank you for taking the time and effort to submit a project
                review. Your testimonial will mean a lot.</b
              >
              For your convenience, you can use ChatGPT below to draft the
              testimonial, which you can then edit.
            </p>
          </div>
        </div>
        <div class="row mt0">
          <div class="col s10 offset-s1">
            <button id="btn-toggle-chatgpt" class="btn btn-main">
              Let Chat GPT draft the review
            </button>
          </div>
          <div id="container-chat-gpt" hidden class="row mb30">
            <div class="col s10 offset-s1">
              <form
                id="chatgpt-form"
                autocomplete="off"
                style="border: 1px solid #bcb7f9; padding: 50px"
              >
                <div class="row mt0 mb0">
                  <p>Enter a project overview in a couple of sentences:</p>
                  <div class="input-field">
                    <textarea
                      id="ta-overview"
                      class="materialize-textarea"
                      placeholder="E.g, I needed to create an automation for my various Google Sheets, which required expertise with third-party APIs. I wasn't sure what the solution would need to look like."
                    ></textarea>
                  </div>
                </div>

                <div class="row mt0 mb0">
                  <p>How did I help your project? Select all that apply:</p>
                </div>
                <div class="row mt0 mb10">
                  <div class="input-field col s12 m4">
                    <p>Aptitude</p>
                    <p>
                      <label>
                        <input type="checkbox" />
                        <span>Knowledgeable</span>
                      </label>
                    </p>
                    <p>
                      <label>
                        <input type="checkbox" />
                        <span>Grasp concepts quickly</span>
                      </label>
                    </p>
                    <p>
                      <label>
                        <input type="checkbox" />
                        <span>Highly competent</span>
                      </label>
                    </p>
                  </div>
                  <div class="input-field col s12 m4">
                    <p>Communication</p>
                    <p>
                      <label>
                        <input type="checkbox" />
                        <span>Asks relevant questions</span>
                      </label>
                    </p>
                    <p>
                      <label>
                        <input type="checkbox" />
                        <span>Quick to respond</span>
                      </label>
                    </p>
                    <p>
                      <label>
                        <input type="checkbox" />
                        <span>Easy to talk with</span>
                      </label>
                    </p>
                    <p>
                      <label>
                        <input type="checkbox" />
                        <span>Always available</span>
                      </label>
                    </p>
                  </div>
                  <div class="input-field col s12 m4">
                    <p>Experience</p>
                    <p>
                      <label>
                        <input type="checkbox" />
                        <span>Cares about scale and security</span>
                      </label>
                    </p>
                    <p>
                      <label>
                        <input type="checkbox" />
                        <span>Creates detailed workflow outlines</span>
                      </label>
                    </p>
                    <p>
                      <label>
                        <input type="checkbox" />
                        <span>Comfortable with 3rd-party APIs</span>
                      </label>
                    </p>
                    <p>
                      <label>
                        <input type="checkbox" />
                        <span>Expert in Google Sheets</span>
                      </label>
                    </p>
                  </div>
                  <div class="row mt0 mb0">
                    <div class="input-field col s12 m4">
                      <p>Performance</p>
                      <p>
                        <label>
                          <input type="checkbox" />
                          <span>Quick to deliver</span>
                        </label>
                      </p>
                      <p>
                        <label>
                          <input type="checkbox" />
                          <span>Offers novel solutions to problems</span>
                        </label>
                      </p>
                      <p>
                        <label>
                          <input type="checkbox" />
                          <span>Keeps projects on track</span>
                        </label>
                      </p>
                    </div>
                    <div class="input-field col s12 m4">
                      <p>Other (hit Enter to add):</p>
                      <div id="div-other-features"></div>
                      <input
                        id="input-other-features"
                        type="text"
                        autocomplete="off"
                      />
                    </div>
                  </div>
                </div>
                <div class="row mt0 mb0">
                  <button id="btn-to-chatgpt" class="btn">
                    Send to Chat GPT
                  </button>
                  <p id="alert-chatgpt"></p>
                </div>
              </form>
            </div>
          </div>
          <div class="row">
            <div class="col s10 offset-s1">
              <form id="review-form" class="col s12 mt30" autocomplete="off">
                <p for="review">Enter your review:</p>
                <div class="input-field">
                  <textarea
                    id="ta-review"
                    class="materialize-textarea"
                  ></textarea>
                </div>
                <div class="row mt0">
                  <div class="col s12 m6 input-field">
                    <input id="name" type="text" autocomplete="off" />
                    <label for="name">Your name</label>
                  </div>
                  <div class="input-field col s12 m6">
                    <input id="email" type="email" autocomplete="off" />
                    <label for="email"
                      >Your email (for my records, kept hidden)</label
                    >
                  </div>
                </div>

                <button
                  type="submit-review"
                  id="review-submit"
                  class="btn btn-hero"
                >
                  Send review
                </button>
                <p id="alert-review"></p>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="page-footer">
      <div class="footer-copyright">
        <div class="container space-between">
          <div>
            <a href="privacy.html">Privacy</a> |
            <a href="terms.html">Terms</a> |
            <a href="../contact.html">Contact</a>
          </div>
          <span>Â© 2020-2024 Copyright Ben Ronkin</span>
          <span
            ><a href="https://benronkin.com/blog/rss.xml">
              <span style="display: flex; align-items: center">
                <i class="material-icons">rss_feed</i> RSS feed
              </span>
            </a></span
          >
        </div>
      </div>
    </footer>
    <template id="template-feature-checkbox">
      <p>
        <label>
          <input type="checkbox" class="new-feature" />
          <span></span>
        </label>
      </p>
    </template>

    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', (event) => {
        // Respond to clicks on the "let chat gpt draft review" button.
        // Includes setting the review textarea.
        document
          .querySelector('#btn-toggle-chatgpt')
          .addEventListener('click', (e) => {
            const btn = e.target;
            const container = document.querySelector('#container-chat-gpt');
            const ta = document.querySelector('#ta-review');

            if (btn.innerText === 'LET CHAT GPT DRAFT THE REVIEW') {
              container.hidden = false;
              btn.innerText = 'Close this panel';
              if (ta.value === '') {
                ta.value = '(Draft to be populated by ChatGPT)';
                M.textareaAutoResize(ta);
              }
            } else {
              container.hidden = true;
              btn.innerText = 'LET CHAT GPT DRAFT THE REVIEW';
              if (ta.value === '(Draft to be populated by ChatGPT)') {
                ta.value = '';
              }
            }
          });
        // Respond to user entering a new feature
        document
          .querySelector('#input-other-features')
          .addEventListener('keydown', (e) => {
            if (e.keyCode === 13) {
              e.preventDefault();
              const txt = e.target;
              if (txt.value.trim().length === 0) {
                return;
              }
              const template = document.querySelector(
                '#template-feature-checkbox'
              );
              const clone = template.content.cloneNode(true);
              clone.querySelector('span').innerText = txt.value;
              clone.querySelector('input').checked = true;
              document.querySelector('#div-other-features').appendChild(clone);
              txt.value = '';
            }
          });
        // Send POST requests to the webapp
        async function postToAppsScript(body) {
          const webappUrl =
            'https://script.google.com/macros/s/AKfycbyFZmaxMRc0lbCBf8t3If7ViyT5WiDvLGonfKo3vBQUaJDTEO3H5LejVZ8x0DBnCJo/exec';
          const headers = new Headers();
          headers.append('Content-Type', 'text/plain;charset=utf-8');
          const req = new Request(webappUrl, {
            method: 'POST',
            redirect: 'follow',
            headers,
            body: JSON.stringify(body),
          });
          try {
            const res = await fetch(req);
            const jsn = await res.json();
            return jsn.message.trim();
          } catch (err) {
            return err.message;
          }
        }

        // Respond to clicks on send to chat gpt button
        document
          .querySelector('#btn-to-chatgpt')
          .addEventListener('click', async function (e) {
            e.preventDefault();
            const btn = e.target;
            btn.disabled = true;
            const alert = document.querySelector('#alert-chatgpt');
            alert.innerText = 'Sending to ChatGPT. Please wait...';
            const checkedBoxes = document.querySelectorAll('input:checked');
            const features = [];
            checkedBoxes.forEach((box) =>
              features.push(box.nextElementSibling.innerText)
            );
            const payload = {
              overview: document.querySelector('#ta-overview').value,
              features: features.join(', '),
            };
            const resp = await postToAppsScript(payload);
            const review = document.querySelector('#ta-review');
            review.value = resp;
            M.textareaAutoResize(review);
            btn.disabled = false;
            alert.innerText =
              'Your draft is below. Feel free to edit as needed.';
          });
        // Respond to review submissions
        document
          .querySelector('#review-submit')
          .addEventListener('click', async function (e) {
            e.preventDefault();
            const btn = e.target;
            btn.disabled = true;
            const alert = document.querySelector('#alert-review');
            alert.innerText = 'Submitting your review. Please wait...';
            const features = [];
            const checkedBoxes = document.querySelectorAll(
              'input.new-feature:checked'
            );
            checkedBoxes.forEach((box) =>
              features.push(box.nextElementSibling.innerText)
            );
            const review = document.querySelector('#ta-review');
            const name = document.querySelector('#name');
            const email = document.querySelector('#email');
            const payload = {
              review: review.value,
              name: name.value,
              email: email.value,
              features: features.join(', '),
            };
            const resp = await postToAppsScript(payload);
            btn.disabled = false;
            alert.innerHTML = `${resp} <a href="index.html">Home</a>`;
            review.value = '';
            name.value = '';
            email.value = '';
          });
      });
    </script>
  </body>
</html>
